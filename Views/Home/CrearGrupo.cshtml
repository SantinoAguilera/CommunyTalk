@{
    ViewData["Title"]="Crear un grupo";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<style>
    body{
    background-color: #63468d;
    }
</style>

<h1 class="NombreUsuario">Crear un nuevo grupo</h1>
    <div class="EditarEstructura">
        <div class="Perfil">
            <div class="InfoUsuario">
                <form method="POST" enctype="multipart/form-data" asp-controller="Home" asp-action="InfoGrupo">
                    <p>Link foto de perfil:</p>
                    <input id="FotodePerfil" name="FotodePerfil"/>
                    <p>Nombre:</p>
                    <input id="Nombre" name="Nombre" required>
                    <p>Descripción:</p>
                    <input id="Descripcion" name="Descripcion" required>
                    <p>Privado o público:</p>
                    <select id="Privado" class="form-select" name="Privado">
                        <option value="1">Privado</option>
                        <option value="0">Público</option>
                    </select>
                    <p>Interés/es</p>
                    <div class="NewTag">
                        <input type="text" id="nuevaTag" placeholder="Nueva tag" class="NewTags">
                        <button type="button" onclick="agregarNuevaTag()" class="BotonNew">Agregar</button>
                    </div>
                    <select id="interesesExistentes" class="Multi" multiple>
                        @{
                            if(ViewBag.Intereses != null){
                                foreach(Intereses intereses in ViewBag.Intereses){
                                    <option value="@intereses.Nombre">@intereses.Nombre</option>
                                }
                            }
                        }
                    </select>
                    <input type="hidden" id="interesesFinales" name="interesesFinales">
                    <p>Admin:</p>
                    <select id="IdAdmin" class="form-select" name="IdAdmin">
                    @{
                        if(ViewBag.Usuarios!=null)
                        {
                            foreach(Usuarios usuario in ViewBag.Usuarios)
                            {
                                <option value="@usuario.IdUsuario">@usuario.Nombre</option>
                            }
                        }
                        else
                        {
                            <option value="0">No existen más usuarios</option>
                        }
                    } 
                    </select>
                    <div class="botonesNo">
                        <button type="submit" class="BotonIniciar">Enviar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selectIntereses = document.getElementById('interesesExistentes');
        const choices = new Choices(selectIntereses, {
            removeItemButton: true,
            placeholderValue: 'Seleccionar intereses',
            searchPlaceholderValue: 'Buscar interés',
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selectIntereses = document.getElementById('interesesExistentes');
        const choices = new Choices(selectIntereses, {
            removeItemButton: true,
            placeho<script>
    // Agregar la nueva tag al campo oculto 'numIntereses' al hacer click en el botón
    function agregarNuevaTag() {
        var nuevaTag = document.getElementById('nuevaTag').value;
        if (nuevaTag) {
            var intereses = document.getElementById('interesesFinales').value.split(','); // Convertir a lista
            intereses.push(nuevaTag); // Agregar nueva tag
            document.getElementById('interesesFinales').value = intereses.join(','); // Actualizar el campo oculto
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        const selectIntereses = document.getElementById('interesesExistentes');
        const choices = new Choices(selectIntereses, {
            removeItemButton: true,
            placeholderValue: 'Seleccionar intereses',
            searchPlaceholderValue: 'Buscar interés',
        });
    });
</script>

